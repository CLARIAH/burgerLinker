---
# ********************************************* #
#                                               #
#  -------------------------------------------  #
#  CBG BurgerLinker Persons in Context Model    #
#  -------------------------------------------  #
#                                               #
#  This file specifies the data model used by   #
#  the input data to BurgerLinker. All classes  #
#  and properties in this file must be defined. #
#                                               #
#  The data model specified in this files is    #
#  based upon the Persons in Context schema [1] #
#  with person names modelled using SDO.        #
#                                               #
#  [1] https://personsincontext.org             #
#                                               #
#  Version: NOV 2025                            #
#                                               #
# ********************************************* #


# ============================================= #
#                                               #
# SPARQL Queries                                #
#                                               #
# ============================================= #

# Return all information pertaining to birth
# events, including information about the newborn
# and its parents.
BIRTHS: >
  PREFIX picom: <https://personsincontext.org/model#>
  PREFIX picot: <https://terms.personsincontext.org/>
  PREFIX pnv: <https://w3id.org/pnv#>
  PREFIX prov: <http://www.w3.org/ns/prov#>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {    {
      SELECT DISTINCT *
      WHERE {
        ?event sdo:additionalType picot:sourcetypes\/551 ;
               sdo:dateCreated ?eventDate .
        ?newbornID prov:hadPrimarySource ?event ;
                   picom:hasRole picot:roles\/575 .
        }
    }
    OPTIONAL { ?newbornID sdo:gender ?genderNewborn }
    OPTIONAL { ?newbornID picom:hasAge ?ageNewborn }
    OPTIONAL { ?newbornID sdo:givenName ?givenNameNewborn ;
                          sdo:familyName ?familyNameNewborn . }
    OPTIONAL { ?newbornID sdo:parent ?fatherNewbornID .
               ?fatherNewbornID sdo:gender ?genderNewbornFather ;
                                sdo:givenName ?givenNameNewbornFather ;
                                sdo:familyName ?familyNameNewbornFather .
               FILTER(?genderNewbornFather = sdo:Male)
               OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID picom:hasAge ?ageNewbornFather }
    }
    OPTIONAL { ?newbornID sdo:parent ?motherNewbornID .
               ?motherNewbornID sdo:gender ?genderNewbornMother ;
                                sdo:givenName ?givenNameNewbornMother ;
                                sdo:familyName ?familyNameNewbornMother .
               FILTER(?genderNewbornMother = sdo:Female)
               OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID picom:hasAge ?ageNewbornMother }
    }
  }

# Return all information pertaining to death
# events, including information about the
# deceased, its partner, and its parents.
DEATHS: >
  PREFIX picom: <https://personsincontext.org/model#>
  PREFIX picot: <https://terms.personsincontext.org/>
  PREFIX pnv: <https://w3id.org/pnv#>
  PREFIX prov: <http://www.w3.org/ns/prov#>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
    {
      SELECT DISTINCT *
      WHERE {
      ?event sdo:additionalType picot:sourcetypes\/553 ;
             sdo:dateCreated ?eventDate .
      ?deceasedID prov:hadPrimarySource ?event ;
                  picom:hasRole picot:roles\/479 .
      }
    }
    OPTIONAL { ?deceasedID sdo:givenName ?givenNameDeceased ;
                           sdo:familyName ?familyNameDeceased }
    OPTIONAL { ?deceasedID sdo:gender ?genderDeceased }
    OPTIONAL { ?deceasedID picom:hasAge ?ageDeceased }
    OPTIONAL { ?deceasedID sdo:parent ?fatherDeceasedID .
               ?fatherDeceasedID sdo:gender ?genderDeceasedFather ;                                 
                                 sdo:givenName ?givenNameDeceasedFather ;
                                 sdo:familyName ?familyNameDeceasedFather .
               FILTER(?genderDeceasedFather = sdo:Male)
               OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID picom:hasAge ?ageDeceasedFather }
    }
    OPTIONAL { ?deceasedID sdo:parent ?motherDeceasedID .
               ?motherDeceasedID sdo:gender ?genderDeceasedMother ;
                                 sdo:givenName ?givenNameDeceasedMother ;
                                 sdo:familyName ?familyNameDeceasedMother .
               FILTER(?genderDeceasedMother = sdo:Female)
               OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID picom:hasAge ?ageDeceasedMother }
    }
    OPTIONAL { ?deceasedID sdo:spouse ?partnerID .
               OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID sdo:gender ?genderPartner }
               OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID sdo:givenName ?givenNamePartner ;
                                                               sdo:familyName ?familyNamePartner }
    }
  }

# Return all information pertaining to marriage
# events, including information about the
# bride and groom, and of both their parents.
MARRIAGES: >  
  PREFIX picom: <https://personsincontext.org/model#>
  PREFIX picot: <https://terms.personsincontext.org/>
  PREFIX pnv: <https://w3id.org/pnv#>
  PREFIX prov: <http://www.w3.org/ns/prov#>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
    { 
      SELECT DISTINCT *
      WHERE {
        ?event sdo:additionalType picot:sourcetypes\/552 ;
               sdo:dateCreated ?eventDate .
       
        ?brideID prov:hadPrimarySource ?event ;
                 picom:hasRole picot:roles\/574 ;
                 sdo:gender ?genderBride .
        FILTER(?genderBride = sdo:Female)
        ?brideID sdo:givenName ?givenNameBride ;
                 sdo:familyName ?familyNameBride .

        ?brideID sdo:spouse ?groomID .
        ?groomID prov:hadPrimarySource ?event ;
                 picom:hasRole picot:roles\/574 ;
                 sdo:gender ?genderGroom .
        FILTER(?genderGroom = sdo:Male)
        ?groomID sdo:givenName ?givenNameGroom ;
                 sdo:familyName ?familyNameGroom .
        }
      }
    OPTIONAL { FILTER(BOUND(?brideID)) ?brideID picom:hasAge ?ageBride }
    OPTIONAL { FILTER(BOUND(?groomID)) ?groomID picom:hasAge ?ageGroom }
    OPTIONAL { ?brideID sdo:parent ?fatherBrideID .
               ?fatherBrideID sdo:gender ?genderBrideFather .
               FILTER(?genderBrideFather = sdo:Male)
               ?fatherBrideID sdo:givenName ?givenNameBrideFather ;
                              sdo:familyName ?familyNameBrideFather .
               OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID picom:hasAge ?ageBrideFather }
    }
    OPTIONAL { ?brideID sdo:parent ?motherBrideID .
               ?motherBrideID sdo:gender ?genderBrideMother .
               FILTER(?genderBrideMother = sdo:Female)
               ?motherBrideID sdo:givenName ?givenNameBrideMother ;
                              sdo:familyName ?familyNameBrideMother .
               OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID picom:hasAge ?ageBrideMother }
    }
    OPTIONAL { ?groomID sdo:parent ?fatherGroomID .
               ?fatherGroomID sdo:gender ?genderGroomFather ;
               FILTER(?genderGroomFather = sdo:Male)
               ?fatherGroomID sdo:givenName ?givenNameGroomFather ;
                              sdo:familyName ?familyNameGroomFather .
               OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID picom:hasAge ?ageGroomFather }
    }
    OPTIONAL { ?groomID sdo:parent ?motherGroomID .
               ?motherGroomID sdo:gender ?genderGroomMother .
               FILTER(?genderGroomMother = sdo:Female)
               ?motherGroomID sdo:givenName ?givenNameGroomMother ;
                              sdo:familyName ?familyNameGroomMother .
               OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID picom:hasAge ?ageGroomMother }
    }
  }

...  # EOF
