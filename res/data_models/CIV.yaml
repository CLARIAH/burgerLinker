---
# ********************************************* #
#                                               #
#  -------------------------------------------  #
#  KNAW BurgerLinker Civil Registry Data Model  #
#  -------------------------------------------  #
#                                               #
#  This file specifies the data model used by   #
#  the input data to BurgerLinker. All          #
#  requested variable bindings must be          #
#  resolvable for BurgerLinker to work          #
#  properly.                                    #
#                                               #
#  The data model specified in this files is    #
#  based upon the Civil Registry Schema, and is #
#  backwards compatible with past versions of   #
#  BurgerLinker.                                #
#                                               #
#  Version: AUG 2025                            #
#                                               #
# ********************************************* #


# ============================================= #
#                                               #
# SPARQL Queries                                #
#                                               #
# ============================================= #

# Return all information pertaining to birth
# events, including information about the newborn
# and its parents.
BIRTHS: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>
  PREFIX sdo: <https://schema.org/>

  SELECT DISTINCT *
  WHERE {
    {
      SELECT DISTINCT *
      WHERE {
              ?event civ:newborn ?newborn ;
                     civ:eventDate ?eventDate .
      }
    }
  OPTIONAL { ?newborn sdo:givenName ?newbornGivenName }
  OPTIONAL { ?newborn sdo:familyName ?newbornFamilyName }
  OPTIONAL { ?newborn sdo:gender ?newbornGender }
  OPTIONAL { ?newborn civ:age ?newbornAge }
  OPTIONAL { ?event civ:father ?newbornFather .
             ?newbornFather sdo:givenName ?newbornFatherGivenName ;
                            sdo:familyName ?newbornFatherFamilyName .
             OPTIONAL { FILTER(BOUND(?newbornFather)) ?newbornFather sdo:gender ?newbornFatherGender }
             OPTIONAL { FILTER(BOUND(?newbornFather)) ?newbornFather civ:age ?newbornFatherAge }
           }
  OPTIONAL { ?event civ:mother ?newbornMother .
             ?newbornMother sdo:givenName ?newbornMotherGivenName ;
                            sdo:familyName ?newbornMotherFamilyName .
             OPTIONAL { FILTER(BOUND(?newbornMother)) ?newbornMother sdo:gender ?newbornMotherGender }
             OPTIONAL { FILTER(BOUND(?newbornMother)) ?newbornMother civ:age ?newbornMotherAge }
           }
  }

# Return all information pertaining to death
# events, including information about the
# deceased, its partner, and its parents.
DEATHS: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>
  PREFIX sdo: <https://schema.org/>

  SELECT DISTINCT *
  WHERE {
    {
      SELECT DISTINCT *
      WHERE {
              ?event civ:deceased ?deceased ;
                     civ:eventDate ?eventDate .                    
      }
    }
  OPTIONAL { ?deceased sdo:givenName ?deceasedGivenName }
  OPTIONAL { ?deceased sdo:familyName ?deceasedFamilyName }
  OPTIONAL { ?deceased sdo:gender ?deceasedGender }
  OPTIONAL { ?deceased civ:age ?deceasedAge }
  OPTIONAL { ?event civ:partner ?partner .
             ?partner sdo:givenName ?partnerGivenName ;
                      sdo:familyName ?partnerFamilyName .
             OPTIONAL { FILTER(BOUND(?partner)) ?partner sdo:gender ?partnerGender }
           }
  OPTIONAL { ?event civ:father ?deceasedFather .
             ?deceasedFather sdo:givenName ?deceasedFatherGivenName ;
                             sdo:familyName ?deceasedFatherFamilyName .
             OPTIONAL { FILTER(BOUND(?deceasedFather)) ?deceasedFather sdo:gender ?deceasedFatherGender }
             OPTIONAL { FILTER(BOUND(?deceasedFather)) ?deceasedFather civ:age ?deceasedFatherAge }
           }
  OPTIONAL { ?event civ:mother ?deceasedMother .
             ?deceasedMother sdo:givenName ?deceasedMotherGivenName ;
                             sdo:familyName ?deceasedMotherFamilyName .
             OPTIONAL { FILTER(BOUND(?deceasedMother)) ?deceasedMother sdo:gender ?deceasedMotherGender }
             OPTIONAL { FILTER(BOUND(?deceasedMother)) ?deceasedMother civ:age ?deceasedMotherAge }
           }
  }

# Return all information pertaining to marriage
# events, including information about the
# bride and groom, and of both their parents.
MARRIAGES: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>
  PREFIX sdo: <https://schema.org/>

  SELECT DISTINCT *
  WHERE {
    {
      SELECT DISTINCT *
      WHERE {
              ?event civ:eventDate ?eventDate ;
                     civ:bride ?bride ;
                     civ:groom ?groom .
      }
    }
  OPTIONAL { ?bride sdo:givenName ?brideGivenName ;
                    sdo:familyName ?brideFamilyName .
             OPTIONAL { FILTER(BOUND(?bride)) ?bride sdo:gender ?brideGender }
             OPTIONAL { FILTER(BOUND(?bride)) ?bride civ:age ?brideAge }
           }
  OPTIONAL { ?groom sdo:givenName ?groomGivenName ;
                    sdo:familyName ?groomFamilyName .
             OPTIONAL { FILTER(BOUND(?groom)) ?groom sdo:gender ?groomGender }
             OPTIONAL { FILTER(BOUND(?groom)) ?groom civ:age ?groomAge }
           }
  OPTIONAL { ?event civ:fatherBride ?brideFather .
             ?brideFather sdo:givenName ?brideFatherGivenName ;
                          sdo:familyName ?brideFatherFamilyName .
             OPTIONAL { FILTER(BOUND(?brideFather)) ?brideFather sdo:gender ?brideFatherGender }
             OPTIONAL { FILTER(BOUND(?brideFather)) ?brideFather civ:age ?brideFatherAge }
           }
  OPTIONAL { ?event civ:motherBride ?brideMother .
             ?brideMother sdo:givenName ?brideMotherGivenName ;
                          sdo:familyName ?brideMotherFamilyName .
             OPTIONAL { FILTER(BOUND(?brideMother)) ?brideMother sdo:gender ?brideMotherGender }
             OPTIONAL { FILTER(BOUND(?brideMother)) ?brideMother civ:age ?brideMotherAge }
           }
  OPTIONAL { ?event civ:fatherGroom ?groomFather .
             ?groomFather sdo:givenName ?groomFatherGivenName ;
                          sdo:familyName ?groomFatherFamilyName .
             OPTIONAL { FILTER(BOUND(?groomFather)) ?groomFather sdo:gender ?groomFatherGender }
             OPTIONAL { FILTER(BOUND(?groomFather)) ?groomFather civ:age ?groomFatherAge }
           }
  OPTIONAL { ?event civ:motherGroom ?groomMother .
             ?groomMother sdo:givenName ?groomMotherGivenName ;
                          sdo:familyName ?groomMotherFamilyName .
             OPTIONAL { FILTER(BOUND(?groomMother)) ?groomMother sdo:gender ?groomMotherGender }
             OPTIONAL { FILTER(BOUND(?groomMother)) ?groomMother civ:age ?groomMotherAge }
           }
  }

...  # EOF
