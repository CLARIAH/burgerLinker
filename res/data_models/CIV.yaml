---
# ********************************************* #
#                                               #
#  -------------------------------------------  #
#  KNAW BurgerLinker Civil Registry Data Model  #
#  -------------------------------------------  #
#                                               #
#  This file specifies the data model used by   #
#  the input data to BurgerLinker. All          #
#  requested variable bindings must be          #
#  resolvable for BurgerLinker to work          #
#  properly.                                    #
#                                               #
#  The data model specified in this files is    #
#  based upon the Civil Registry Schema, and is #
#  backwards compatible with past versions of   #
#  BurgerLinker.                                #
#                                               #
#  Version: AUG 2025                            #
#                                               #
# ********************************************* #


# ============================================= #
#                                               #
# SPARQL Queries                           #
#                                               #
# ============================================= #

# Return all statements in the graph, and, if it
# concerns information about a person, also
# return the identifiers and event date.
STATEMENTS: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>

  SELECT ?s ?p ?o ?sPersonID ?oPersonID ?eventDate
  WHERE {
    ?s ?p ?o .

    OPTIONAL { ?s civ:personID ?sPersonID } .
    OPTIONAL { ?o civ:personID ?oPersonID } .
    OPTIONAL { ?event ?q ?s;
                      civ:eventDate ?eventDate . }
  }

# Return all information pertaining to birth
# events, including information about the newborn
# and its parents.
BIRTHS: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
  ?event civ:newborn ?newbornID ;
         civ:eventDate ?eventDate ;
         civ:registrationID ?eventID .
  ?newbornID civ:personID ?idNewborn ;
             sdo:givenName ?givenNameNewborn ;
             sdo:familyName ?familyNameNewborn .
  OPTIONAL { ?newbornID sdo:gender ?genderNewborn }
  OPTIONAL { ?newbornID civ:age ?ageNewborn }
  OPTIONAL { ?event civ:father ?fatherNewbornID .
             OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID civ:personID ?idNewbornFather }
             OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID sdo:givenName ?givenNameNewbornFather }
             OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID sdo:familyName ?familyNameNewbornFather }
             OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID sdo:gender ?genderNewbornFather }
             OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID civ:age ?ageNewbornFather }
           }
  OPTIONAL { ?event civ:mother ?motherNewbornID .
             OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID civ:personID ?idNewbornMother }
             OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID sdo:givenName ?givenNameNewbornMother }
             OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID sdo:familyName ?familyNameNewbornMother }
             OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID sdo:gender ?genderNewbornMother }
             OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID civ:age ?ageNewbornMother }
           }
  }

# Return all information pertaining to death
# events, including information about the
# deceased, its partner, and its parents.
DEATHS: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
  ?event civ:deceased ?deceasedID ;
         civ:mother ?motherDeceasedID ;
         civ:eventDate ?eventDate ;
         civ:registrationID ?eventID .
  ?deceasedID civ:personID ?idDeceased ;
              sdo:givenName ?givenNameDeceased ;
              sdo:familyName ?familyNameDeceased .
  OPTIONAL { ?deceasedID sdo:gender ?genderDeceased }
  OPTIONAL { ?deceasedID civ:age ?ageDeceased }
  OPTIONAL { ?event civ:partner ?partnerID .
             ?partnerID civ:personID ?idPartner .
             OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID sdo:givenName ?givenNamePartner }
             OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID sdo:familyName ?familyNamePartner }
             OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID sdo:gender ?genderPartner }
           }
  OPTIONAL { ?event civ:father ?fatherDeceasedID .
             OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID civ:personID ?idDeceasedFather }
             OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID sdo:givenName ?givenNameDeceasedFather }
             OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID sdo:familyName ?familyNameDeceasedFather }
             OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID sdo:gender ?genderDeceasedFather }
             OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID civ:age ?ageDeceasedFather }
           }
  OPTIONAL { ?event civ:mother ?motherDeceasedID .
             OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID civ:personID ?idDeceasedMother }
             OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID sdo:givenName ?givenNameDeceasedMother }
             OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID sdo:familyName ?familyNameDeceasedMother }
             OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID sdo:gender ?genderDeceasedMother }
             OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID civ:age ?ageDeceasedMother }
           }
  }

# Return all information pertaining to marriage
# events, including information about the
# bride and groom, and of both their parents.
MARRIAGES: >
  PREFIX civ: <https://iisg.amsterdam/id/civ/>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
  ?event civ:bride ?brideID ;
         civ:groom ?groomID ;
         civ:eventDate ?eventDate ;
         civ:registrationID ?eventID .
  ?brideID civ:personID ?idBride .
  OPTIONAL { ?brideID sdo:givenName ?givenNameBride }
  OPTIONAL { ?brideID sdo:familyName ?familyNameBride }
  OPTIONAL { ?brideID sdo:gender ?genderBride }
  OPTIONAL { ?brideID civ:age ?ageBride }
  ?groomID civ:personID ?idGroom .
  OPTIONAL { ?groomID sdo:givenName ?givenNameGroom }
  OPTIONAL { ?groomID sdo:familyName ?familyNameGroom }
  OPTIONAL { ?groomID sdo:gender ?genderGroom }
  OPTIONAL { ?groomID civ:age ?ageGroom }
  OPTIONAL { ?event civ:fatherBride ?fatherBrideID .
             OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID civ:personID ?idBrideFather }
             OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID sdo:givenName ?givenNameBrideFather }
             OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID sdo:familyName ?familyNameBrideFather }
             OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID sdo:gender ?genderBrideFather }
             OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID civ:age ?ageBrideFather }
           }
  OPTIONAL { ?event civ:motherBride ?motherBrideID .
             OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID civ:personID ?idBrideMother }
             OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID sdo:givenName ?givenNameBrideMother }
             OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID sdo:familyName ?familyNameBrideMother }
             OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID sdo:gender ?genderBrideMother }
             OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID civ:age ?ageBrideMother }
           }
  OPTIONAL { ?event civ:fatherGroom ?fatherGroomID .
             OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID civ:personID ?idGroomFather }
             OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID sdo:givenName ?givenNameGroomFather }
             OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID sdo:familyName ?familyNameGroomFather }
             OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID sdo:gender ?genderGroomFather }
             OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID civ:age ?ageGroomFather }
           }
  OPTIONAL { ?event civ:motherGroom ?motherGroomID .
             OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID civ:personID ?idGroomMother }
             OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID sdo:givenName ?givenNameGroomMother }
             OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID sdo:familyName ?familyNameGroomMother }
             OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID sdo:gender ?genderGroomMother }
             OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID civ:age ?ageGroomMother }
           }
  }

...  # EOF
