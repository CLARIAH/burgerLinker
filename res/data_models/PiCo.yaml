---
# ********************************************* #
#                                               #
#  -------------------------------------------  #
#  CBG BurgerLinker Persons in Context Model    #
#  -------------------------------------------  #
#                                               #
#  This file specifies the data model used by   #
#  the input data to BurgerLinker. All classes  #
#  and properties in this file must be defined. #
#                                               #
#  The data model specified in this files is    #
#  based upon the Persons in Context schema [1] #
#                                               #
#  [1] https://personsincontext.org             #
#                                               #
#  Version: AUG 2025                            #
#                                               #
# ********************************************* #


# ============================================= #
#                                               #
# SPARQL Queries                           #
#                                               #
# ============================================= #

# Return all information pertaining to birth
# events, including information about the newborn
# and its parents.
BIRTHS: >
  PREFIX picom: <https://personsincontext.org/model#>
  PREFIX picot: <https://terms.personsincontext.org/>
  PREFIX pnv: <https://w3id.org/pnv>
  PREFIX prov: <http://www.w3.org/ns/prov#>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
    ?event sdo:additionalType picot:sourcetypes/551 ;
           sdo:dateCreated ?eventDate ;
           sdo:identifier ?eventID .
    ?newbornID prov:hadPrimarySource ?event ;
               picom:hasRole picot:roles/575 ;
               sdo:identifier ?idNewborn .
    OPTIONAL { ?newbornID sdo:gender ?genderNewborn }
    OPTIONAL { ?newbornID picom:hasAge ?ageNewborn }
    OPTIONAL { ?newbornID pnv:hasName ?nameNewborn .
               ?nameNewborn pnv:givenName ?givenNameNewborn ;
                            pnv:baseSurname ?familyNameNewborn .
    }
    OPTIONAL { ?newbornID sdo:parent ?fatherNewbornID .
               ?fatherNewbornID sdo:gender sdo:Male ;
                                sdo:identifier ?idNewbornFather .
               OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID picom:hasAge ?ageNewbornFather }
               OPTIONAL { FILTER(BOUND(?fatherNewbornID)) ?fatherNewbornID pnv:hasName ?nameNewbornFather .
                          OPTIONAL { FILTER(BOUND(?fatherNewbornID) && FILTER(BOUND(?nameNewbornFather))
                                     ?fatherNewbornID pnv:givenName ?givenNameNewbornFather }
                          OPTIONAL { FILTER(BOUND(?fatherNewbornID) && FILTER(BOUND(?nameNewbornFather))
                                     ?fatherNewbornID pnv:baseSurname ?familyNameNewbornFather }
               }
             }
    OPTIONAL { ?newbornID sdo:parent ?motherNewbornID .
               ?motherNewbornID sdo:gender sdo:Female ;
                                sdo:identifier ?idNewbornMother .
               OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID picom:hasAge ?ageNewbornMother }
               OPTIONAL { FILTER(BOUND(?motherNewbornID)) ?motherNewbornID pnv:hasName ?nameNewbornMother .
                          OPTIONAL { FILTER(BOUND(?motherNewbornID) && FILTER(BOUND(?nameNewbornMother))
                                     ?motherNewbornID pnv:givenName ?givenNameNewbornMother }
                          OPTIONAL { FILTER(BOUND(?motherNewbornID) && FILTER(BOUND(?nameNewbornMother))
                                     ?motherNewbornID pnv:baseSurname ?familyNameNewbornMother }
               }
             }
    }

# Return all information pertaining to death
# events, including information about the
# deceased, its partner, and its parents.
DEATHS: >
  PREFIX bio: <http://purl.org/vocab/bio/0.1/>
  PREFIX picom: <https://personsincontext.org/model#>
  PREFIX picot: <https://terms.personsincontext.org/>
  PREFIX pnv: <https://w3id.org/pnv>
  PREFIX prov: <http://www.w3.org/ns/prov#>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
    ?event sdo:additionalType picot:sourcetypes/553 ;
           sdo:dateCreated ?eventDate ;
           sdo:identifier ?eventID .
    ?deceasedID prov:hadPrimarySource ?event ;
                picom:hasRole picot:roles/479 ;
                sdo:identifier ?idDeceased .
    OPTIONAL { ?deceasedID sdo:gender ?genderDeceased }
    OPTIONAL { ?deceasedID picom:hasAge ?ageDeceased }
    OPTIONAL { ?deceasedID pnv:hasName ?nameDeceased .
               ?nameDeceased pnv:givenName ?givenNameDeceased ;
                             pnv:baseSurname ?familyNameDeceased .
    }
    OPTIONAL { ?deceasedID sdo:parent ?fatherDeceasedID .
               ?fatherDeceasedID sdo:gender sdo:Male ;
                                 sdo:identifier ?idDeceasedFather .
               OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID picom:hasAge ?ageDeceasedFather }
               OPTIONAL { FILTER(BOUND(?fatherDeceasedID)) ?fatherDeceasedID pnv:hasName ?nameDeceasedFather .
                          OPTIONAL { FILTER(BOUND(?fatherDeceasedID) && BOUND(?nameDeceasedFather))
                                     ?fatherDeceasedID pnv:givenName ?givenNameDeceasedFather }
                          OPTIONAL { FILTER(BOUND(?fatherDeceasedID) && BOUND(?nameDeceasedFather))
                                     ?fatherDeceasedID pnv:baseSurname ?familyNameDeceasedFather }
               }
    }
    OPTIONAL { ?deceasedID sdo:parent ?motherDeceasedID .
               ?motherDeceasedID sdo:gender sdo:Female ;
                                 sdo:identifier ?idDeceasedMother .
               OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID picom:hasAge ?ageDeceasedMother }
               OPTIONAL { FILTER(BOUND(?motherDeceasedID)) ?motherDeceasedID pnv:hasName ?nameDeceasedMother .
                          OPTIONAL { FILTER(BOUND(?motherDeceasedID) && BOUND(?nameDeceasedMother))
                                     ?motherDeceasedID pnv:givenName ?givenNameDeceasedMother }
                          OPTIONAL { FILTER(BOUND(?motherDeceasedID) && BOUND(?nameDeceasedMother))
                                     ?motherDeceasedID pnv:baseSurname ?familyNameDeceasedMother }
              }
    }
    OPTIONAL { ?deceasedID sdo:spouse ?partnerID .
               ?partnerID sdo:identifier ?idPartner .
               OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID sdo:gender ?genderPartner }
               OPTIONAL { FILTER(BOUND(?partnerID)) ?partnerID pnv:hasName ?namePartner .
                          OPTIONAL { FILTER(BOUND(?partnerID) && BOUND(?namePartner))
                                     ?partnerID pnv:givenName ?givenNamePartner }
                          OPTIONAL { FILTER(BOUND(?partnerID) && BOUND(?namePartner))
                                     ?partnerID pnv:baseSurname ?familyNamePartner }
              }
    }
 }

# Return all information pertaining to marriage
# events, including information about the
# bride and groom, and of both their parents.
MARRIAGES: >  
  PREFIX bio: <http://purl.org/vocab/bio/0.1/>
  PREFIX picom: <https://personsincontext.org/model#>
  PREFIX picot: <https://terms.personsincontext.org/>
  PREFIX pnv: <https://w3id.org/pnv>
  PREFIX prov: <http://www.w3.org/ns/prov#>
  PREFIX sdo: <https://schema.org/>

  SELECT *
  WHERE {
    ?event sdo:additionalType picot:sourcetypes/552 ;
           sdo:dateCreated ?eventDate ;
           sdo:identifier ?eventID .
    OPTIONAL { ?brideID prov:hadPrimarySource ?event ;
                        picom:hasRole picot:roles/574 ;
                        sdo:identifier ?idBride ;
                        sdo:gender ?genderBride .
                        FILTER(?genderBride = sdo:Female)
                        OPTIONAL { FILTER(BOUND(?brideID)) ?brideID picom:hasAge ?ageBride }
                        OPTIONAL { FILTER(BOUND(?brideID)) ?brideID pnv:hasName ?nameBride .
                                   OPTIONAL { FILTER(BOUND(?brideID) && BOUND(?nameBride))
                                              ?nameBride pnv:givenName ?givenNameBride }
                                   OPTIONAL { ?nameBride pnv:baseSurname ?familyNameBride }
                        }
    }
    OPTIONAL { ?brideID sdo:spouse ?groomID .
               ?groomID prov:hadPrimarySource ?event ;
                        picom:hasRole picot:roles/574 ;
                        sdo:identifier ?idGroom ;
                        sdo:gender ?genderGroom .
                        FILTER(?genderGroom = sdo:Male)
                        OPTIONAL { FILTER(BOUND(?groomID)) ?groomID picom:hasAge ?ageGroom }
                        OPTIONAL { FILTER(BOUND(?groomID)) ?groomID pnv:hasName ?nameGroom .
                                   OPTIONAL { FILTER(BOUND(?groomID) && BOUND(?nameGroom))
                                              ?nameGroom pnv:givenName ?givenNameGroom }
                                   OPTIONAL { ?nameGroom pnv:baseSurname ?familyNameGroom }
                        }
    }
    OPTIONAL { ?brideID sdo:parent ?fatherBrideID .
               ?fatherBrideID sdo:identifier ?idBrideFather ;
                              sdo:gender ?genderBrideFather .
                              FILTER(?genderBrideFather = sdo:Male)
                              OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID picom:hasAge ?ageBrideFather }
                              OPTIONAL { FILTER(BOUND(?fatherBrideID)) ?fatherBrideID pnv:hasName ?nameBrideFather .
                                         OPTIONAL { FILTER(BOUND(?fatherBrideID) && BOUND(?nameBrideFather))
                                                    ?fatherBrideID pnv:givenName ?givenNameBrideFather }
                                         OPTIONAL { FILTER(BOUND(?fatherBrideID) && BOUND(?nameBrideFather))
                                                    ?fatherBrideID pnv:baseSurname ?familyNameBrideFather }
                              }
    }
    OPTIONAL { ?brideID sdo:parent ?motherBrideID .
               ?motherBrideID sdo:identifier ?idBrideMother ;
                              sdo:gender ?genderBrideMother .                  
                              FILTER(?genderBrideMother = sdo:Female)
                              OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID picom:hasAge ?ageBrideMother }
                              OPTIONAL { FILTER(BOUND(?motherBrideID)) ?motherBrideID pnv:hasName ?nameBrideMother .
                                         OPTIONAL { FILTER(BOUND(?motherBrideID) && BOUND(?nameBrideMother))
                                                    ?motherBrideID pnv:givenName ?givenNameBrideMother }
                                         OPTIONAL { FILTER(BOUND(?motherBrideID) && BOUND(?nameBrideMother))
                                                    ?motherBrideID pnv:baseSurname ?familyNameBrideMother }
                             }
    }
    OPTIONAL { ?groomID sdo:parent ?fatherGroomID .
               ?fatherGroomID sdo:identifier ?idGroomFather ;
                              sdo:gender ?genderGroomFather .
                              FILTER(?genderGroomFather = sdo:Male)
                              OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID picom:hasAge ?ageGroomFather }
                              OPTIONAL { FILTER(BOUND(?fatherGroomID)) ?fatherGroomID pnv:hasName ?nameGroomFather .
                                         OPTIONAL { FILTER(BOUND(?fatherGroomID) && BOUND(?nameGroomFather))
                                                    ?fatherGroomID pnv:givenName ?givenNameGroomFather }
                                         OPTIONAL { FILTER(BOUND(?fatherGroomID) && BOUND(?nameGroomFather))
                                                    ?fatherGroomID pnv:baseSurname ?familyNameGroomFather }
                              }
    }
    OPTIONAL { ?groomID sdo:parent ?motherGroomID .
               ?motherGroomID sdo:identifier ?idGroomMother ;
                              sdo:gender ?genderGroomMother .                  
                              FILTER(?genderGroomMother = sdo:Female)
                              OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID picom:hasAge ?ageGroomMother }
                              OPTIONAL { FILTER(BOUND(?motherGroomID)) ?motherGroomID pnv:hasName ?nameGroomMother .
                                         OPTIONAL { FILTER(BOUND(?motherGroomID) && BOUND(?nameGroomMother))
                                                    ?motherGroomID pnv:givenName ?givenNameGroomMother }
                                         OPTIONAL { FILTER(BOUND(?motherGroomID) && BOUND(?nameGroomMother))
                                                    ?motherGroomID pnv:baseSurname ?familyNameGroomMother }
                             }
    }

 }

...  # EOF
